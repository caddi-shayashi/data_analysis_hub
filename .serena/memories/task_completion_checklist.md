# タスク完了時のチェックリスト

## タスク完了前に必ず実行すること

### 1. コード品質チェック（必須）
```bash
# コードフォーマットの確認と修正
uv run black .

# リンティングチェック
uv run flake8 .

# 型チェック（Pythonファイルがある場合）
uv run mypy .
```

### 2. テスト実行（テストがある場合）
```bash
# テストの実行
uv run pytest

# カバレッジ付きテスト
uv run pytest --cov
```

### 3. ファイル操作の確認
- 不要なファイルを作成していないか確認
- 既存ファイルの編集を優先したか確認
- ドキュメント（*.md）ファイルは明示的に要求された場合のみ作成

### 4. BigQuery使用時の確認（該当する場合）
- [ ] dry_run=trueでコスト確認を実施したか
- [ ] WHERE句で日付フィルタリングを使用したか
- [ ] 大規模JOINを段階的に処理したか

### 5. データ処理ライブラリの選択確認
- [ ] BigQuery上で処理可能 → bigframesを使用
- [ ] ローカル大量データ → polarsを使用
- [ ] 複雑な前処理 → pandasを使用
- [ ] 並列処理必要 → daskを使用

### 6. MCP使用の確認
- [ ] Perplexity MCPはデフォルトで`ask`を使用したか
- [ ] 大量ファイル操作時はFilesystem MCPを使用したか
- [ ] コード解析が必要な場合はSerena MCPを使用したか

### 7. セキュリティチェック
- [ ] 認証情報をコードに含めていないか
- [ ] .envファイルをコミットしていないか
- [ ] APIキーや秘密情報がログに出力されないか

### 8. Git操作（コミットする場合のみ）
```bash
# 変更内容の確認
git status
git diff

# ステージングと確認
git add .
git status

# コミット（明示的に要求された場合のみ）
git commit -m "適切なコミットメッセージ"
```

## 推奨される実行順序
1. コード実装・修正
2. black実行（フォーマット）
3. flake8実行（リンティング）
4. mypy実行（型チェック）
5. pytest実行（テスト）
6. 最終確認
7. （必要に応じて）Gitコミット

## 注意事項
- **rmコマンドが使用できない場合は必ず`trash`コマンドを使用**
- **コミットは明示的に要求された場合のみ実行**
- **コメントの追加は特に指示がない限り避ける**